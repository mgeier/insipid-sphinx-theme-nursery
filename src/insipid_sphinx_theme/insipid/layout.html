{% extends "basic/layout.html" %}


{% if theme_left_buttons is string and theme_left_buttons %}
{% set theme_left_buttons = theme_left_buttons.split(',')|map('trim') %}
{% endif %}
{% if theme_right_buttons is string and theme_right_buttons %}
{% set theme_right_buttons = theme_right_buttons.split(',')|map('trim') %}
{% endif %}


{% block css %}
{{ super() }}
{% if READTHEDOCS|tobool and render_sidebar %}
    <link rel="stylesheet" href="{{ pathto('_static/insipid-sidebar-readthedocs.css', 1) }}" type="text/css" />
{% endif %}
{% endblock %}


{% block scripts %}
{{ super() }}
    <script defer src="{{ pathto('_static/insipid.js', 1) }}"></script>
{% if render_sidebar %}
    <script defer src="{{ pathto('_static/sidebar.js', 1) }}"></script>
{% endif %}
{% endblock %}


{% block extrahead %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}


{% block body_tag %}
  <body class="no-js{% if render_sidebar %} sidebar-hidden{% endif %}">
{% endblock %}


{% block header %}
    <script type="text/javascript">
        var body = $(document.body);
        body.addClass('loading');
        body.removeClass('no-js');
        body.addClass('js');
{% if render_sidebar %}
        try {
            var sidebar = localStorage.getItem('sphinx-sidebar');
            if (sidebar === 'visible') {
                body.removeClass('sidebar-hidden');
                body.addClass('sidebar-visible');
            }
            var sidebar_width = localStorage.getItem('sphinx-sidebar-width');
            if (sidebar_width) {
                $(':root').css('--sidebar-width', sidebar_width);
            }
        } catch(e) {
        }
{% endif %}
    </script>

            <div id="topbar-placeholder">
                <div id="topbar-container">
                    <div id="menu-bar">
                        <div class="left-buttons">
{% if not theme_rightsidebar|tobool %}
{% include 'sidebar-button.html' %}
{% endif %}
{% for buttontemplate in theme_left_buttons %}
{% include buttontemplate %}
{% endfor %}
                        </div>

                        {# TODO: docstitle vs. shorttitle #}
                        {# TODO: use parent document instead of master_doc? #}
                        <h1 class="menu-title"><a href="{{ pathto(master_doc) }}">{{ docstitle|e }}</a></h1>

                        <div class="right-buttons">
                            {#{{#if git_repository_url}}#}
                            {#
                            <a href="{{git_repository_url}}" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa {{git_repository_icon}}"></i>
                            </a>
                            #}
                            {#{{/if}}#}
{% for buttontemplate in theme_right_buttons %}
{% include buttontemplate %}
{% endfor %}
{% if theme_rightsidebar|tobool %}
{% include 'sidebar-button.html' %}
{% endif %}
                        </div>
                    </div>

{% if pagename != "search" %}
                {#
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                </div>
                #}

<div id="searchbox" role="search">
  <div id="searchform" class="hidden">
  {#
  <h3 id="searchlabel">{{ _('Quick search') }}</h3>
  -->
  #}
    <form class="search" action="{{ pathto('search') }}" method="get">
      <!--
        aria-labelledby="searchlabel"
      -->
      <input type="search" id="searchbar" name="q" placeholder="{{ _('Search') + ' ...' }}" />
      <input type="submit" value="{{ _('Go') }}" />
    </form>
  </div>
</div>

{% endif %}

            </div>
        </div>

{# TODO: config option to disable this? #}
{% if theme_body_max_width != None %}
            <nav aria-label="Page navigation">
    {% if prev %}
                    <a href="{{ prev.link|e }}" class="nav-icon previous" title="{{ _('previous') + ':\n' + prev.title|striptags|e }}" aria-label="Previous page" aria-keyshortcuts="Left">
                      {% include 'icons/previous.svg' %}
                    </a>
    {% endif %}
    {% if next %}
                    <a href="{{ next.link|e }}" class="nav-icon next" title="{{ _('next') + ':\n' + next.title|striptags|e }}" aria-label="Next page" aria-keyshortcuts="Right">
                      {% include 'icons/next.svg' %}
                    </a>
    {% endif %}
            </nav>
{% endif %}
{% endblock %}


{% block sidebarlogo %}
      <div id="sidebar-resize-handle"></div>
{{ super() }}
{% endblock %}


{% block relbar1 %}{% include 'relbar.html' %}{% endblock %}


{% block sidebar1 %}{% endblock %}


{% block sidebar2 %}{% endblock %}


{% block relbar2 %}{% include 'relbar.html' %}{% endblock %}


{% block footer %}
{{ sidebar() }}
{{ super() }}
{% if render_sidebar %}
    <label id="overlay"></label>

    <!-- TODO: provide a re-usable function for this in .js file? -->
    <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
    <script type="text/javascript">
      document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
      document.querySelector('.sphinxsidebar').setAttribute('aria-hidden', sidebar !== 'visible');
      /*
      Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
          link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
      });
      */
    </script>
{% endif %}
{% endblock %}
