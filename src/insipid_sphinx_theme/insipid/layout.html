{% extends "basic/layout.html" %}


{% if theme_left_buttons is string and theme_left_buttons %}
{% set theme_left_buttons = theme_left_buttons.split(',')|map('trim') %}
{% endif %}
{% if theme_right_buttons is string and theme_right_buttons %}
{% set theme_right_buttons = theme_right_buttons.split(',')|map('trim') %}
{% endif %}


{% macro navbar() %}
    <nav>
      {%- if prev %}
      <a class="navbar previous" href="{{ prev.link|e }}" title="{{ _('Previous topic') }}" {{ accesskey('P') }}>
        {% include 'icons/previous.svg' %}
        {{ _('previous') }}
        {{ prev.title }}
      </a>
      {%- endif %}
      {%- if next %}
      <a class="navbar next" href="{{ next.link|e }}" title="{{ _('Next topic') }}" {{ accesskey('N') }}>
        {% include 'icons/next.svg' %}
        {{ _('next') }}
        {{ next.title }}
      </a>
      {%- endif %}
    </nav>
{#-
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          {% if prev %}
            <a href="{{ prev.link|e }}" title="Material"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> {{ prev.title }} </span>
              </div>
            </a>
          {% endif %}
          {% if next %}
            <a href="{{ next.link|e }}" title="Admonition"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> {{ next.title }} </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          {% endif %}
        </a>
      </nav>
    </div>
#}
{%- endmacro %}


{% block css %}
{{- super() }}
{%- if READTHEDOCS|tobool and render_sidebar %}
    <link rel="stylesheet" href="{{ pathto('_static/insipid-sidebar-readthedocs.css', 1) }}" type="text/css" />
{%- endif %}
{%- endblock %}


{% block scripts %}
{{ super() }}
    <script defer src="{{ pathto('_static/insipid.js', 1) }}"></script>
{%- if render_sidebar %}
    <script defer src="{{ pathto('_static/sidebar.js', 1) }}"></script>
{%- endif %}
{%- endblock %}


{% block extrahead %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
{%- endblock %}


{% block body_tag %}
  <body class="no-js{% if render_sidebar %} sidebar-visible{% endif %}">
{%- endblock %}


{% block header %}
    <script type="text/javascript">
        var body = $(document.body);
        body.addClass('loading');
        body.removeClass('no-js');
        body.addClass('js');
{%- if render_sidebar %}
        body.removeClass('sidebar-visible');
        body.addClass('sidebar-hidden');
        try {
            var sidebar = localStorage.getItem('sphinx-sidebar');
            if (sidebar === 'visible') {
                body.removeClass('sidebar-hidden');
                body.addClass('sidebar-visible');
            }
            var sidebar_width = localStorage.getItem('sphinx-sidebar-width');
            if (sidebar_width) {
                $(':root').css('--sidebar-width', sidebar_width);
            }
        } catch(e) {
        }
{%- endif %}
    </script>
    <div id="topbar-placeholder">
      <div id="topbar-container">
        <div id="menu-bar">
          <div class="left-buttons">
{%- if not theme_rightsidebar|tobool %}
{%- include 'sidebar-button.html' %}
{%- endif %}
{%- for buttontemplate in theme_left_buttons %}
{%- include buttontemplate %}
{%- endfor %}
          </div>
          {#- TODO: docstitle vs. shorttitle #}
          {#- TODO: use parent document instead of master_doc? #}
          <h1 class="menu-title"><a href="{{ pathto(master_doc) }}">{{ docstitle|e }}</a></h1>
          <div class="right-buttons">
{%- for buttontemplate in theme_right_buttons %}
{%- include buttontemplate %}
{%- endfor %}
{%- if theme_rightsidebar|tobool %}
{%- include 'sidebar-button.html' %}
{%- endif %}
          </div>
        </div>
{%- if pagename != "search" %}
                {#-
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                </div>
                #}
        <div id="searchbox" role="search">
          <div id="searchform" class="hidden">
          {#-
          <h3 id="searchlabel">{{ _('Quick search') }}</h3>
          #}
            <form class="search" action="{{ pathto('search') }}" method="get">
              <!--
                aria-labelledby="searchlabel"
              -->
              <input type="search" id="searchbar" name="q" placeholder="{{ _('Search') + ' ...' }}" />
              <input type="submit" value="{{ _('Go') }}" />
            </form>
          </div>
        </div>
{%- endif %}
      </div>
    </div>
{%- endblock %}


{# TODO: separate options for top/bottom navbar? #}
{% block relbar1 %}{{ navbar() }}{% endblock %}


{% block sidebar1 %}
{#- TODO: config option to disable the nav buttons? #}
{%- if theme_body_max_width != None %}
    <nav>
{%- if prev %}
      <a href="{{ prev.link|e }}" class="nav-icon previous" title="{{ _('previous') }}:&#13;{{ prev.title|striptags }}" aria-label="{{ _('Previous topic') }}" {{ accesskey('P') }}>
        {% include 'icons/previous.svg' %}
      </a>
{%- endif %}
{%- if next %}
      <a href="{{ next.link|e }}" class="nav-icon next" title="{{ _('next') }}:&#13;{{ next.title|striptags }}" aria-label="{{ _('Next topic') }}" {{ accesskey('N') }}>
        {% include 'icons/next.svg' %}
      </a>
{%- endif %}
    </nav>
{%- endif %}
{%- endblock %}


{% block sidebar2 %}{% endblock %}


{# TODO: separate options for top/bottom navbar? #}
{% block relbar2 %}{{ navbar() }}{% endblock %}


{% block footer %}
{{ sidebar() }}
{{ super() }}
{%- if render_sidebar %}
    <div class="sidebar-resize-handle"></div>
    <label id="overlay"></label>
    <!-- TODO: provide a re-usable function for this in .js file? -->
    <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
    <script type="text/javascript">
      document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
      document.querySelector('.sphinxsidebar').setAttribute('aria-hidden', sidebar !== 'visible');
      /*
      Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
          link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
      });
      */
    </script>
{%- endif %}
{%- endblock %}


{% block sidebarlogo %}
          <div class="sidebar-resize-handle"></div>
{{ super() }}
{% endblock %}
