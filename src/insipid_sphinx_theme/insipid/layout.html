{# NB: classic/layout.html only adds its sidebar.js, which we override anyway  #}
{% extends "basic/layout.html" %}

{% block extrahead %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}

{% block body_tag %}
  <body class="no-js{% if render_sidebar %} sidebar-visible{% endif %}">
{% endblock %}

{% block header %}
    <script type="text/javascript">
        document.body.classList.remove('no-js')
        document.body.classList.add('js');
{% if render_sidebar %}
        var sidebar;
        try { sidebar = localStorage.getItem('sphinx-sidebar'); } catch(e) { }
        sidebar = sidebar || 'visible';
        document.body.classList.remove('sidebar-visible');
        document.body.classList.add('sidebar-' + sidebar);
{% endif %}
    </script>

                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
{% if render_sidebar %}
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Sidebar" aria-label="Toggle Sidebar" aria-controls="sidebar">
                              {% include 'icons/sidebar-toggle.svg' %}
                            </button>
{% endif %}
                            {#{{#if search_enabled}}#}
                            <button id="search-toggle" class="icon-button" type="button" title="Search" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                              {% include 'icons/search.svg' %}
                            </button>
                            {#{{/if}}#}
                        </div>

                        {# docstitle vs. shorttitle #}
                        <h1 class="menu-title">{{ docstitle|e }}</h1>

                        <div class="right-buttons">
                            {#
                            <a href="{{ path_to_root }}print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            #}
                            {#{{#if git_repository_url}}#}
                            {#
                            <a href="{{git_repository_url}}" title="Git repository" aria-label="Git repository">
                                <i id="git-repository-button" class="fa {{git_repository_icon}}"></i>
                            </a>
                            #}
                            {#{{/if}}#}
                        </div>
                    </div>
                </div>

                {#{{#if search_enabled}}#}
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                {#{{/if}}#}
{% endblock %}

{% block sidebarlogo %}
{# We abuse this block to inject the sidebar-resize-handle #}
{% if render_sidebar %}
      <div id="sidebar-resize-handle"></div>
{% endif %}
{{ super() }}
{% endblock %}

{#
{% block relbar1 %}{% endblock %}

{% block content %}
{% endblock %}

{% block relbar2 %}{% endblock %}
#}

{% block footer %}
{{ super() }}
{% if render_sidebar %}
                <!-- TODO: provide a re-usable function for this in .js file? -->
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.querySelector('.sphinxsidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    /*
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                    */
                </script>

    <script src="{{ pathto('_static/sidebar.js', 1) }}"></script>
{% endif %}
    <script src="{{ pathto('_static/menubar.js', 1) }}"></script>
{% endblock %}
