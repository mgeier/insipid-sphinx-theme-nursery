{# NB: classic/layout.html only adds its sidebar.js, which we override anyway  #}
{% extends "basic/layout.html" %}

{% block extrahead %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}

{% block body_tag %}
  <body class="no-js sidebar-{% if render_sidebar %}visible{% else %}hidden{% endif %}">
{% endblock %}

{% block header %}
    <script type="text/javascript">
        document.body.classList.remove('no-js')
        document.body.classList.add('js');

        var sidebar = {% if render_sidebar %}'visible'{% else %}'hidden'{% endif %};
        document.body.classList.remove("sidebar-" + sidebar);
        if (document.body.clientWidth >= 1080) {
            var stored_sidebar;
            try { stored_sidebar = localStorage.getItem('insipid-sidebar'); } catch(e) { }
            sidebar = stored_sidebar || sidebar;
        }
        document.body.classList.add("sidebar-" + sidebar);
    </script>
{% endblock %}

{% block sidebarlogo %}
{# We abuse this block to inject the sidebar-resize-handle #}
      <div id="sidebar-resize-handle"></div>
{{ super() }}
{% endblock %}

{#
{% block relbar1 %}{% endblock %}

{% block content %}
{% endblock %}

{% block relbar2 %}{% endblock %}
#}

{% block footer %}
{% if render_sidebar %}
    <script src="{{ pathto('_static/sidebar.js', 1) }}"></script>
{% endif %}
{% endblock %}
